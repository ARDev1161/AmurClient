<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AmurClient: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AmurClient
   &#160;<span id="projectnumber">0.42</span>
   </div>
   <div id="projectbrief">Client software for AMUR-307 robot on Raspberry Pi.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p align="center"></p>
<p><img src="https://raw.githubusercontent.com/ARDev1161/AmurClient/gh-pages/_includes/logo.png" alt="AmurClient Logo" height="100" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md4"></a>
Client software for Amur distribution board (ADB-0.42)</h1>
<p>This is application for communicate with robot on RPi base with Amur distribution board. <br  />
</p>
<p><a href="https://github.com/ARDev1161/AmurClient/releases/latest"><img src="https://img.shields.io/github/v/tag/ARDev1161/AmurClient.svg?style=for-the-badge" alt="Release" style="pointer-events: none;" class="inline"/></a> <a href="/LICENSE.md"><img src="https://img.shields.io/badge/license-Apache%202.0-green.svg?style=for-the-badge" alt="Software License" style="pointer-events: none;" class="inline"/></a></p>
<p><a href="https://amurclient.online/docs/html/md_README.html"><img src="https://img.shields.io/badge/doc&#39;s-Doxygen-blue.svg?style=for-the-badge" alt="Documentation" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/ARDev1161"><img src="https://img.shields.io/badge/powered%20by-ARDev1161-green.svg?style=for-the-badge" alt="Powered By: ARDev1161" style="pointer-events: none;" class="inline"/></a> </p>
<h2><a class="anchor" id="autotoc_md5"></a>
Requirements:</h2>
<p>1) CMake - for install read: <a href="https://snapcraft.io/install/cmake/raspbian">https://snapcraft.io/install/cmake/raspbian</a> 2) Protobuf &amp; gRPC - for install read: <a href="https://grpc.io/docs/languages/cpp/quickstart/">https://grpc.io/docs/languages/cpp/quickstart/</a> need install in system(/usr/local) 3) PiGPIO - for install read: <a href="http://abyz.me.uk/rpi/pigpio/download.html">http://abyz.me.uk/rpi/pigpio/download.html</a> 4) libconfig - for install:</p>
<p>sudo apt-get install libconfig++-dev -y</p>
<p>5) GStreamer (not used, will be added in the future)</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Compile AmurClient</h2>
<p>git clone <a href="https://github.com/ARDev1161/AmurClient.git">https://github.com/ARDev1161/AmurClient.git</a> &ndash;recurse-submodules cd AmurClient mkdir bin &amp;&amp; cd bin</p>
<p>cmake -DCMAKE_BUILD_TYPE=Release -DGRPC_FETCHCONTENT=OFF ../</p>
<p>cmake &ndash;build . &ndash; -j4</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Sensors of Amur:</h2>
<p>1) Camera - OV5647 2) Inertial sensor - MPU-9250 3) Encoders wheel: left, right - HOA0901 4) Encoders hand internal: left, right - HOA0901 5) Encoders hand outter: left, right - HOA0901 6) ADC module - ADS1115(address - 0x48) 7) RTC module - DS3231(address - 0x68) with AT24C32(address - 0x57) 8) Barometer - BMP-280 9) Battery voltage</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Controls of Amur:</h2>
<p>1) ServoX, ServoY - MG90S 2) <a class="el" href="classMotor.html">Motor</a> wheel: left, right 3) <a class="el" href="classMotor.html">Motor</a> hand internal: left, right 4) <a class="el" href="classMotor.html">Motor</a> hand outter: left, right</p>
<h2><a class="anchor" id="autotoc_md9"></a>
GPIO using:</h2>
<ul>
<li>GPIO4 - Data from 74<a class="el" href="classHC165.html" title="Класс работы с регистром 74HC165.">HC165</a></li>
<li>GPIO17 - Clk 74<a class="el" href="classHC165.html" title="Класс работы с регистром 74HC165.">HC165</a></li>
<li>GPIO18 - Not master reset 74<a class="el" href="classHC595.html" title="Класс работы с регистром 74HC595.">HC595</a></li>
<li>GPIO27 - SH/Not(LD) 74<a class="el" href="classHC165.html" title="Класс работы с регистром 74HC165.">HC165</a></li>
<li>GPIO22 - Clk inh 74<a class="el" href="classHC165.html" title="Класс работы с регистром 74HC165.">HC165</a></li>
<li>GPIO23 - Data to 74<a class="el" href="classHC595.html" title="Класс работы с регистром 74HC595.">HC595</a></li>
<li>GPIO24 - SHcp 74<a class="el" href="classHC595.html" title="Класс работы с регистром 74HC595.">HC595</a></li>
<li>GPIO25 - STcp 74<a class="el" href="classHC595.html" title="Класс работы с регистром 74HC595.">HC595</a></li>
<li>GPIO5 - freePin 3</li>
<li>GPIO6 - freePin 4</li>
<li>GPIO12 - PWM1 right</li>
<li>GPIO13 - PWM1 left</li>
<li>GPIO19 - freePin 1</li>
<li>GPIO16 - Not OE 74<a class="el" href="classHC595.html" title="Класс работы с регистром 74HC595.">HC595</a></li>
<li>GPIO26 - freePin 2</li>
<li>GPIO20 - PWM2 right</li>
<li>GPIO21 - PWM2 left</li>
</ul>
<h3><a class="anchor" id="autotoc_md10"></a>
GPIO freePins header(from left to right):</h3>
<p>Use for LoRa(SX1278) 1) GPIO19 - Rx enable 2) GPIO26 - Tx enable 3) GPIO5 - DI0 4) GPIO6 - Reset</p>
<h3><a class="anchor" id="autotoc_md11"></a>
SPI0 header(from up to down):</h3>
<p>Use for LoRa(SX1278) 1) CE1 2) CE0 3) SCLK 4) MISO 5) MOSI</p>
<h3><a class="anchor" id="autotoc_md12"></a>
I2C1 header(from left to right):</h3>
<p>Use for ADS1115 1) Vpd 2) SCL 3) SDA 4) GND</p>
<h3><a class="anchor" id="autotoc_md13"></a>
UART0 header(from left to right):</h3>
<p>1) Vpd 2) Tx 3) Rx 4) GND</p>
<h3><a class="anchor" id="autotoc_md14"></a>
Voltage jumper(for peripheral devices - Vpd):</h3>
<p>1) Left - 3.3V 2) Right - 5V</p>
<h3><a class="anchor" id="autotoc_md15"></a>
74HC595 using:</h3>
<p>bites trancieve in register from last to first: from 16 to 1</p>
<p>(First byte - right)</p><ul>
<li>1bit - right relay</li>
<li>2bit - clk2 right motor shield (Hand right motor - A2 input)</li>
<li>3bit - clk1 right motor shield (Wheel right motor - A1 input)</li>
<li>4bit - cnt1 right motor shield (Wheel right motor - B1 input)</li>
<li>5bit - cnt2 right motor shield (Hand right motor - B2 input)</li>
<li>6bit - en1 right motor shield (Wheel right motor)</li>
<li>7bit - en2 right motor shield (Hand right motor)</li>
<li>8bit - right LED light</li>
</ul>
<p>(Second byte - left)</p><ul>
<li>9bit - left relay</li>
<li>10bit - clk2 left motor shield (Wheel left motor - A2 input)</li>
<li>11bit - clk1 left motor shield (Hand left motor - A1 input)</li>
<li>12bit - cnt1 left motor shield (Hand left motor - B1 input)</li>
<li>13bit - cnt2 left motor shield (Wheel left motor - B2 input)</li>
<li>14bit - en1 left motor shield (Hand left motor)</li>
<li>15bit - en2 left motor shield (Wheel left motor)</li>
<li>16bit - left LED light</li>
</ul>
<h3><a class="anchor" id="autotoc_md16"></a>
74HC165 using:</h3>
<p>bites recieve by register from first to last: from 1 to 16</p>
<p>(First byte - right)</p><ul>
<li>1bit - LR2B encoder (Hand outer right encoder - B signal)</li>
<li>2bit - LR1B encoder (Hand internal right encoder - B signal)</li>
<li>3bit - LL2B encoder (Hand outer left encoder - B signal)</li>
<li>4bit - LL1B encoder (Hand internal left encoder - B signal)</li>
<li>5bit - LL1A encoder (Hand internal left encoder - A signal)</li>
<li>6bit - LL2A encoder (Hand outer left encoder - A signal)</li>
<li>7bit - LR1A encoder (Hand internal right encoder - A signal)</li>
<li>8bit - LR2A encoder (Hand outer right encoder - A signal)</li>
</ul>
<p>(Second byte - left)</p><ul>
<li>9bit - freeInPin</li>
<li>10bit - freeInPin</li>
<li>11bit - freeInPin</li>
<li>12bit - freeInPin</li>
<li>13bit - R1A encoder (Wheel left encoder - A signal)</li>
<li>14bit - R1B encoder (Wheel left encoder - B signal)</li>
<li>15bit - R2B encoder (Wheel right encoder - B signal)</li>
<li>16bit - R2A encoder (Wheel right encoder - A signal) </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
